{% extends '::frontend.html.twig' %}
{% block title %}Ficheros {% endblock %}

{% block article %}
<section>
	<h1>{{ block('title') }}</h1>
	<div id="itsthetable">
	<table><caption>{{ app.user.nombreusuario }}<a href="{{ path('ficheros') }}">/{{ ruta }}</a></caption>
	<thead><tr><th style='width:80%;'>Nombre</th><th>Tama&ntilde;o</th><th>Modificado</th><th></th></tr></thead>
	<tbody>
		{% set var1 = 0 %}
		{% for ficheros in ficheros %}
		
		{% set var1 = var1 + 1 %}

		<tr {% if var1 is divisibleby(2) %} class="odd" {% endif %}>
			<th>
				{% if ficheros.tipo == 'carpeta' %}
					{% if ficheros.ruta == '/' %}
						<a href="{{ path('ficheros') }}{{ ['/',ficheros.nombrefichero]|join }}">{{ ficheros.nombrefichero }}/</a> 
					{% else %}
						<a href="{{ path('ficheros') }}{{ [ficheros.ruta,'/',ficheros.nombrefichero]|join }}">{{ ficheros.nombrefichero }}/</a> 
					{% endif %}
					
				{% else %}
					{{ ficheros.nombrefichero }}
				{% endif %}
			</th>
			<th>{% if ficheros.filesize <= 1024 %}{{ ficheros.filesize }} bytes {% else %} {{ficheros.filesize / 1024 }} Kbytes{% endif %}</th>
			<th>{{ ficheros.fechasubida|date('d-m-Y') }}</th>
			<th> 
				<a href="{{ path('modificar', { 'fichero': ficheros.idfichero }) }}"><img  alt="Editar" src="{{ asset('bundles/usuario/images/edit.png') }}"></img></a>
				<a href="{{ path('borrar', { 'fichero': ficheros.idfichero }) }}"><img alt="Eliminar" src="{{ asset('bundles/usuario/images/delete.png') }}"></img></a>
			</th>
		</tr>
		{% endfor %}
		{% if var1 == 0 %}<tr><th><a href="{{ app.request.getRequestURI() }}/../"/>../</a></th><th></th><th></th><th></th></tr>{% endif %}
	</tbody>
	<tfoot><tr><th>Total</th><td colspan="4">{{ var1  }} archivos</td></tr></tfoot>
	</table>
	</div>	

	</div>
</section>
{% endblock %}